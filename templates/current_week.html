<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Karma Ranks</title>
  <meta name="description" content="Anime karma ranks from r/anime subreddit">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Link your custom stylesheet -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/home.css') }}">
</head>
<body>

  <!-- Header with site title and navigation -->
  <header>
    <div class="logo">
      <h1>Karma Ranks</h1>
    </div>
    <nav>
      <ul>
        <li><a href="{{ url_for('current_week') }}">Home</a></li>
        <li><a href="{{ url_for('winter_week_5') }}">Week {{ current_week_id - 1 }} Chart</a></li>
        <li><a href="{{ url_for('current_chart') }}">Week {{ current_week_id }} Chart</a></li>
      </ul>
    </nav>
  </header>
  
  <!-- Main content area -->
  <main>
    <!-- Hero / Title Section -->
    <section class="hero">
      <h2>Current Week (Week {{ current_week_id }})</h2>
      <p>{{ airing_details.airing_period }}</p>
    </section>

    <!-- Table Section -->
    <section class="rank-table-container">
      <table>
        <thead>
          <tr>
            <th>Rank</th>
            <th>Show</th>
            <th>Episode</th>
            <th>Karma</th>
            <th>Comments</th>
            <th>Karma Change</th>
            <th>Rank Change</th>
            <th>Reddit Link</th>
          </tr>
        </thead>
        <tbody>
          {% if current_shows %}
            {% for show in current_shows %}
            <tr>
                <td>{{ show.current_rank }}</td>
                <td>
                    <div class="show-container">
                      <img 
                        src="{{ show.small_banner }}"
                        alt="{{ show.title_english or show.title }}"
                        onerror="this.onerror=null;this.nextElementSibling.style.display='inline-block';this.style.display='none';"/>
                      <span style="display:none;">{{ show.title_english or show.title }}</span>
                    </div>
                </td>
                <td>{{ show.episode }}</td>
                <td>{{ show.karma }}</td>
                <td>{{ show.comments }}</td>
                <td>{{ show.karma_change }}</td>
                <td>{{ show.rank_change }}</td>
                <td><a href="{{ show.url }}" target="_blank">Link</a></td>
            </tr>
            {% endfor %}
          {% else %}
            <tr>
              <td colspan="8">No shows to display this week</td>
            </tr>
          {% endif %}
        </tbody>
      </table>
    </section>
  </main>

  <!-- Footer with placeholder info -->
  <footer>
    <p>&copy; 2025 Karma Ranks. All rights reserved.</p>
    <p>Data collected weekly from r/anime subreddit.</p>
  </footer>

</body>
</html>
