<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Karma Watch - Anime Karma Rankings</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="static/css/new_home.css">

    <!-- React and dependencies for the Karma Chart -->
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/17.0.2/umd/react.production.min.js"></script>
    <script crossorigin
        src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/17.0.2/umd/react-dom.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/recharts/2.15.0/Recharts.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.26.0/babel.min.js"></script>

    <!-- Additional styles for the karma chart -->
    <style>
        .chart-container {
            background-color: var(--card-bg);
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            padding: 16px;
        }

        .dark-theme .chart-container {
            background-color: var(--dark-card-bg);
        }

        #karma-chart {
            width: 100%;
            min-height: 500px;
        }

        .explanation {
            background-color: var(--light-bg);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .dark-theme .explanation {
            background-color: var(--dark-accent-bg);
        }

        .explanation h3 {
            margin-top: 0;
            color: var(--text-color);
        }

        .dark-theme .explanation h3 {
            color: var(--dark-text-color);
        }

        .loading-message {
            text-align: center;
            padding: 2rem;
            font-size: 1.2rem;
        }

        .error-message {
            text-align: center;
            padding: 2rem;
            color: #ff4d4d;
            font-size: 1.2rem;
        }
    </style>
</head>

<body>
    <header>
        <div class="header-container">
            <div class="logo">
                <i class="fa-solid fa-chart-line"></i>
                <span>Anime Karma Rankings</span>
            </div>
            <nav>
                <a class="action-link" href="current_chart.html">Current Chart</a>
                <a class="action-link active" href="karma_watch.html">Karma Watch</a>
                <div class="controls">
                    <li class="dropdown">
                        <a href="#" class="dropbtn">Previous Weeks ▾</a>
                        <div class="dropdown-content">
                            
                            
                            <div class="season-group">
                                <div class="season-header">2024 Fall</div>
                                
                                <a href="2024/fall/week_5.html">
                                    Week 5
                                </a>
                                
                                <a href="2024/fall/week_4.html">
                                    Week 4
                                </a>
                                
                                <a href="2024/fall/week_3.html">
                                    Week 3
                                </a>
                                
                                <a href="2024/fall/week_2.html">
                                    Week 2
                                </a>
                                
                                <a href="2024/fall/week_1.html">
                                    Week 1
                                </a>
                                
                            </div>
                            
                            <div class="season-group">
                                <div class="season-header">2024 Winter</div>
                                
                                <a href="2024/winter/week_9.html">
                                    Week 9
                                </a>
                                
                                <a href="2024/winter/week_8.html">
                                    Week 8
                                </a>
                                
                                <a href="2024/winter/week_7.html">
                                    Week 7
                                </a>
                                
                                <a href="2024/winter/week_6.html">
                                    Week 6
                                </a>
                                
                                <a href="2024/winter/week_5.html">
                                    Week 5
                                </a>
                                
                                <a href="2024/winter/week_4.html">
                                    Week 4
                                </a>
                                
                                <a href="2024/winter/week_3.html">
                                    Week 3
                                </a>
                                
                                <a href="2024/winter/week_2.html">
                                    Week 2
                                </a>
                                
                                <a href="2024/winter/week_13.html">
                                    Week 13
                                </a>
                                
                                <a href="2024/winter/week_12.html">
                                    Week 12
                                </a>
                                
                                <a href="2024/winter/week_11.html">
                                    Week 11
                                </a>
                                
                                <a href="2024/winter/week_10.html">
                                    Week 10
                                </a>
                                
                            </div>
                            
                            
                            
                            <div class="season-group">
                                <div class="season-header">2025 Winter</div>
                                
                                <a href="2025/winter/week_9.html">
                                    Week 9
                                </a>
                                
                                <a href="2025/winter/week_8.html">
                                    Week 8
                                </a>
                                
                                <a href="2025/winter/week_7.html">
                                    Week 7
                                </a>
                                
                                <a href="2025/winter/week_6.html">
                                    Week 6
                                </a>
                                
                                <a href="2025/winter/week_5.html">
                                    Week 5
                                </a>
                                
                                <a href="2025/winter/week_4.html">
                                    Week 4
                                </a>
                                
                                <a href="2025/winter/week_11.html">
                                    Week 11
                                </a>
                                
                                <a href="2025/winter/week_10.html">
                                    Week 10
                                </a>
                                
                            </div>
                            
                            
                            
                            <div class="season-group">
                                <div class="season-header">2023 Fall</div>
                                
                                <a href="2023/fall/week_9.html">
                                    Week 9
                                </a>
                                
                                <a href="2023/fall/week_8.html">
                                    Week 8
                                </a>
                                
                                <a href="2023/fall/week_7.html">
                                    Week 7
                                </a>
                                
                                <a href="2023/fall/week_6.html">
                                    Week 6
                                </a>
                                
                                <a href="2023/fall/week_5.html">
                                    Week 5
                                </a>
                                
                                <a href="2023/fall/week_4.html">
                                    Week 4
                                </a>
                                
                                <a href="2023/fall/week_3.html">
                                    Week 3
                                </a>
                                
                                <a href="2023/fall/week_2.html">
                                    Week 2
                                </a>
                                
                                <a href="2023/fall/week_13.html">
                                    Week 13
                                </a>
                                
                                <a href="2023/fall/week_12.html">
                                    Week 12
                                </a>
                                
                                <a href="2023/fall/week_11.html">
                                    Week 11
                                </a>
                                
                                <a href="2023/fall/week_10.html">
                                    Week 10
                                </a>
                                
                                <a href="2023/fall/week_1.html">
                                    Week 1
                                </a>
                                
                            </div>
                            
                            
                        </div>
                    </li>
                    <button class="theme-toggle" id="theme-toggle">
                        <i class="fa-solid fa-moon"></i>
                    </button>
                </div>
            </nav>
        </div>
    </header>

    <main>
        <div class="explanation">
            <h3>Karma Watch</h3>
            <p>Compare how different anime discussion threads accumulate karma over time. Select multiple shows to
                visualize their karma progression on the same chart.</p>
            <p>Each line represents the karma growth of a show's discussion thread during the first 48 hours after
                posting.</p>
        </div>

        <div class="chart-container">
            <!-- Initial loading state will be replaced by the React component -->
            <div id="karma-chart">
                <div class="loading-message">Loading karma data...</div>
            </div>
        </div>
    </main>

    <footer>
        <p>© 2025 Anime Karma Rankings | Data updates every hour</p>
        <div class="footer-links">
            <a href="https://github.com/abysswatcherbel/abysswatcherbel.github.io" class="footer-link"
                target="_blank">GitHub</a>
            <a href="https://www.reddit.com/r/anime/" class="footer-link" target="_blank">r/anime</a>
        </div>
    </footer>

    <!-- Theme toggle script -->
    <script>
        // Theme toggle functionality
        const themeToggle = document.getElementById('theme-toggle');
        const themeIcon = themeToggle.querySelector('i');

        // Check for saved theme preference or use preferred color scheme
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'dark' || (!savedTheme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.body.classList.add('dark-theme');
            themeIcon.classList.replace('fa-moon', 'fa-sun');
        }

        themeToggle.addEventListener('click', () => {
            document.body.classList.toggle('dark-theme');

            if (document.body.classList.contains('dark-theme')) {
                themeIcon.classList.replace('fa-moon', 'fa-sun');
                localStorage.setItem('theme', 'dark');
            } else {
                themeIcon.classList.replace('fa-sun', 'fa-moon');
                localStorage.setItem('theme', 'light');
            }
        });
    </script>

    <!-- Load the React component script -->
    <script type="text/babel" src="static/scripts/karma_chart.js"></script>
</body>

</html>